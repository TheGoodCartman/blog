<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.9.0">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Die Ringe der Macht - Staffel 2 – The KingOli Blog</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../">
<link href="../../../../k-typewriter.png" rel="icon" type="image/png">
<script src="../../../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../site_libs/quarto-html/quarto-syntax-highlighting-0ed29b1f0e6f007c337b74d6a5232f88.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../site_libs/bootstrap/bootstrap-dc797a86ed2ad7be54980078017504d0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../../k-typewriter.png" alt="" class="navbar-logo light-content">
    <img src="../../../../k-typewriter.png" alt="" class="navbar-logo dark-content">
    </a>
    <a class="navbar-brand" href="../../../../index.html">
    <span class="navbar-title">The KingOli Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/TheGoodCartman"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Die Ringe der Macht - Staffel 2</h1>
  <div class="quarto-categories">
    <div class="quarto-category">gesehen</div>
  </div>
  </div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">09.10.2024 23:55</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/EqniPax8LGE" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<p>Sie ist die teuerste Fernsehserie aller Zeiten; gestartet mit dem Versprechen, uns Zuschauern zu zeigen, unter welchen Umständen die Ringe der Macht einst geschmiedet wurden. Mit reizvollen Nebenfiguren aus <em>Der Herr der Ringe</em> wie Galadriel und Elrond, aber vor allem dem vielschichtigen Sauron ist eigentlich eine perfekte Basis für tolle Fantasy gegeben - und doch schaffen es die Macher bisher nicht, neben all dem Production value auch eine glaubhafte Geschichte zu erzählen.</p>
<p>Dabei gibt es immer wieder tolle Momente, die zeigen, was eigentlich möglich wäre. Schon am Ende von Staffel 1 traf Sauron in Gestalt von Halbrand auf Celebrimbor, und man konnte greifen, wie beide als begeisterte Schmiede sich gegenseitig mit Plänen und Ideen befruchteten. Tolkien motivierte in wenigen Sätzen, dass Celebrimbor an den Ringen mitgewirkt hat, um seinen Vorfahren Feanor zu übertreffen, und deshalb erst spät den Einfluss Saurons erkannt hat. Aber auch Sauron hatte anfangs noch keinen vollständigen Plan und musste erst lernen, welche Wirkung sein Blut in den Ringen hat - die Serie zeigt dies wunderbar in einem Dialog zwischen den beiden. Als endlich Saurons Hülle als Annatar gefallen ist und beide sich auf Augenhöhe unterhalten können, erfährt auch der Zuschauer schlussendlich, was beide antrieb.</p>
<section id="warum-machen-die-das-jetzt" class="level3">
<h3 class="anchored" data-anchor-id="warum-machen-die-das-jetzt">Warum machen die das jetzt?</h3>
<p>Allerdings kommt dies ganz schön spät. Ich habe während der Serie viel in meiner Ausgabe von <em>Lord of the rings</em> geblättert, um zu verstehen, was gerade auf dem Bildschirm passiert. Wie sollen jedoch Zuschauer ohne dieses Wissen verstehen, was die Charaktere antreibt, wenn es selten so offen dargelegt wird?</p>
<p>Generell wirken viele Entscheidungen konstruiert; die Serie opfert nicht nur einmal die Glaubwürdigkeit ihrer Figuren um sie in Situationen zu bringen, die der Plot erfordert.</p>
<p>Beispiele gefällig?</p>
<ul>
<li>Elrond hat Durin überzeugt, ihn bei der Verteidigung von Eregion mit einem Heer zur Seite zu stehen. Doch Durin muss sich um den immer wahnsinniger werdenden Vater kümmern, also bricht er sein Versprechen. Doch warum kann er nicht einfach die Armee schicken und selber bleiben? Genau das passiert ja auch später…</li>
<li>Als der Balrog auftaucht, schnappt er sich mit seiner Peitsche Durins Vater - und lässt ihn kurz vor dem Abgrund wieder los. Gandalf hatte Jahre später nicht so viel Glück. Und nach der bis dahin gezeigten Entwicklung konnte ich den Entschluss, den Ring abzulegen und allein gegen den Balrog zu kämpfen, nicht nachvollziehen.</li>
<li>Galadriel wird am Ausgang des geheimen Zwergenganges nach Eregion von Orks empfangen. Wenn diese jedoch wissen, dass es so einen Gang gibt, warum haben sie dann erst eine Belagerung begonnen?</li>
<li>Als Adar sich gegen Ende der Schlacht den Ring von Elrond schnappt und die Mauer Eregions durchbrochen ist, steht ihm scheinbar nichts mehr im Weg, um Sauron entgegen zu treten. Doch was macht Adar, trotz des Wissens um Saurons Fähigkeiten? Er schickt Orks, den großen Täuscher gefangen zu nehmen, und zieht sich in sein Lager zurück, das plötzlich oberhalb der Stadt liegt. Das muss ich nicht begreifen, oder?</li>
</ul>
</section>
<section id="show-dont-tell" class="level3">
<h3 class="anchored" data-anchor-id="show-dont-tell">Show don’t tell</h3>
<p>… gilt nicht nur für das geschriebene Wort. Peter Jackson hatte vor zwanzig Jahren eine Vision und hat mit seinen Bildern die Sicht vieler Zuschauer auf Mittelerde geprägt. <em>Die Ringe der Macht</em> wollen dies einfach nur reproduzieren und scheitern daran, eigene Bilder zu entwickeln.</p>
<p>Die Elben sollen eigentlich elegante Krieger und die besten Schmiede ihres Zeitalters sein. Doch was zeigt uns <em>Die Ringe der Macht</em>? Schwere Metallrüstungen, die scheppern wie bei römischen Legionen. Und Celebrimbor skizziert seine Designs mit Kohle auf Papier und feilt an den Ringen, während er sie in der Hand hält. Das ist alles sehr unterwältigend; auch wie Sauron die Elben manipuliert. Klar, er gibt sich als Annatar, der Geschenke aus - aber wieso das auf die Elben Wirkung hat, wird wiederum nicht erklärt. Stattdessen wird im Dialog zwischen Zuckerbrot und Peitsche gependelt, was für mich nicht einen großen Verführer zeigt, sondern einen Verzweifelten, dem jedes Mittel Recht ist.</p>
<p>Die Elben scheinen dagegen nur noch Menschen mit spitzen Ohren zu sein, im Verhalten ist kein Unterschied zu sehen. So blieb mir vollkommen unklar, wie man die gut befestigte Stadt Eregion so schlecht verteidigen kann. Der Vorteil der Höhe wird nicht ausgenutzt, Leitern an der Mauer nicht zurückgestoßen, und als die Orks nach etlichen Versuchen endlich die Mauer durchbrochen haben gibt es keinen Elfen, der dahinter auf sie wartet (außer den nach stundenlanger Belagerung immer noch chaotisch durch die Stadt laufenden Zivilisten).</p>
<p>Das mag im Drehbuch in wenigen Sätzen sehr gut geklungen haben, aber auf dem Schirm wirkt es einfach nur unglaubwürdig.</p>
</section>
<section id="fanservice-es-muss-eine-epische-schlacht-sein" class="level3">
<h3 class="anchored" data-anchor-id="fanservice-es-muss-eine-epische-schlacht-sein">Fanservice / Es muss eine epische Schlacht sein</h3>
<p>Die <em>Herr der Ringe</em> Trilogie hat Maßstäbe gesetzt, wie Fantasy auf der großen Leinwand aussehen kann: Episch, bildgewaltig, voller großer Helden und Gesten. Weniger geht seitdem nicht mehr. Wie war ich dann Jahre später geflasht, als <em>Game of Thrones</em> mit all dem brach und in der ersten Staffel eine Schlacht zwischen den Starks und Lannisters einfach im Off abhandelte.</p>
<p>Die <em>Ringe der Macht</em> traut sich das nicht und zitiert alle Klischees, die man sich nur vorstellen kann. Bis hin zum Elben, der von mehreren Pfeilen getroffen noch einen wichtigen Schuss ansetzt.</p>
</section>
<section id="reisefieber" class="level3">
<h3 class="anchored" data-anchor-id="reisefieber">Reisefieber</h3>
<p>Ein großer Kritikpunkt der letzten Staffeln von <em>Game of Thrones</em> war, dass die sorgfältig vorher aufgebaute Welt von Westeros mit ihren Entfernungen plötzlich nichts mehr galt, weil die Charaktere an bestimmten Orten gebraucht wurden.</p>
<p>Auch <em>Die Ringe der Macht</em> kann sich nicht ganz einigen, ob und wie schnell man von Lindon nach Eregion kommt. Briefe in die eine Richtung werden abgefangen, Trupps von zerstörten Brücken zu tagelangen Umwegen gezwungen, während Arondir und ganze Heere scheinbar schnell reisen. Zeit und Raum müssen sich hier leider vollkommen der Geschichte unterordnen. Bei Tolkien hat sich das Schmieden der Ringe über hundert Jahre hingezogen, was schön die Zeit betont, die Elben sich für wichtige Dinge nehmen - aber solche Zeitspannen will man dem Zuschauer wohl nicht zumuten, stattdessen wird künstlich ein Zeitdruck aufgebaut.</p>
</section>
<section id="letzte-gedanken" class="level3">
<h3 class="anchored" data-anchor-id="letzte-gedanken">Letzte Gedanken</h3>
<p>Jetzt habe ich mich natürlich auf die Fehler konzentriert, die mich immer wieder rausgerissen haben. Wer nicht so genau hinschaut wie ich, kann sicherlich auch viel Spaß mit der Serie haben - z.B. ist Rory Kinnear ein wirklich ausgezeichneter Tom Bombadil.</p>
<p>Zum Schluss will ich noch kurz erklären, was es mit dem eingebetteten Video von <em>Within Temptation</em> auf sich hat: Die vorletzte Episode der zweiten Staffel, <em>Doomed to Die</em>, endet mit dem sehr martialischen Metal-Song <em>The Last Ballad of Damrod</em> über den Troll, der in der gezeigten Schlacht um Eregion gefallen ist. Ich fand dies sehr passend an der Stelle, aber der Song verfehlt ohne die Bilder leider etwas seine Wirkung. Doch da Sauron am Ende oft der große Täuscher genannt wurde, fiel mir der Song <em>Deceiver of Fools</em> ein, dessen Text dem Herrn der Ringe wie auf den Leib geschneidert scheint. Vielleicht hören wir ihn in einer der nächsten Staffeln; noch muss der eine Ring ja geschmiedet werden…</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/kingoli\.net\/blog\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>