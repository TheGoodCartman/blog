<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Meine Sony α65 - ein vergleichendes Review – The KingOli Blog</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../">
<link href="../../../../k-typewriter.png" rel="icon" type="image/png">
<script src="../../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../site_libs/quarto-html/quarto-syntax-highlighting-018089954d508eae8a473f0b7f0491f0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../site_libs/bootstrap/bootstrap-ca39c5f18ac0e7c24689a67fe4150f41.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../../k-typewriter.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../../../index.html">
    <span class="navbar-title">The KingOli Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/TheGoodCartman"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Meine Sony α65 - ein vergleichendes Review</h1>
  <div class="quarto-categories">
    <div class="quarto-category">gedacht</div>
    <div class="quarto-category">gefunden</div>
  </div>
  </div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">28.11.2013 10:21</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>Als ich vor einiger Zeit diesen <a href="http://www.13thfloorphotography.blogspot.de/2013/08/an-unfair-comparison-review-of-a58-and.html">Artikel über einen Vergleich einer Sony α58 mit einer Olympus OM-D E-M5</a> las, wurde ich daran erinnert, dass ich zu beiden Kameras auch etwas schreiben wollte. Genauer gesagt zu den Kritikpunkten des Artikels an der α58, die ich mit meiner inzwischen anderthalb Jahre alten α65 fast 1:1 nachvollziehen kann. Die Olympus-Kamera habe ich dagegen im Berliner Olympus OM-D: Photography Playground im August ausprobieren können, so dass ich auch dazu etwas schreiben will.</p>
<p>Anfangen möchte ich mit der Entscheidung, weshalb ich überhaupt eine Sony-Kamera gekauft habe. Vor fast drei Jahren wuchs in mir der Wunsch bessere Fotos aufzunehmen, als es meine <a href="../../../../2009/07/19/so-viel-zoom-muss-sein/">Hosentascheknipse</a> erlaubt. Zum einen hatte ich an der Nikon D90 eines Reisegefährten gesehen, dass bei gleichen Motiven der qualitative Unterschied größer als erwartet ist. Zum Anderen wollte ich endlich mit der Tiefenschärfe herumspielen, so dass ein größerer Sensor unabdingbar war.</p>
<p>Also stand ich vor dem Einstieg in die DSLR-Fotographie. Der <a href="../../../../2011/10/03/die-ostkuste-der-usa/">USA-Urlaub</a> mit der Canon 350D meines Bruders bestätigte mich in meinem Wunsch und gab mir vor allem die Gewissheit, dass ich wirklich bereit bin, ein solches Gerät ständig mit mir herum zu schleppen. Im Bereich meiner Preisvorstellung tummelten sich Ende 2011 die Canon EOS 600D, die Nikon 5100, die Sony α65 und die Pentax K-5 - letztere strich ich aufgrund ihres schlichten Designs sofort aus der Liste. Ich wollte einen möglichst kleinen Body und die spiegellosen Systemkameras waren aufgrund der geringen Objektivauswahl noch keine ernsthafte Alternative.</p>
<p>Hätte ich die Entscheidung heute treffen müssen, hätte ich eine Sony NEX-6 gewählt, da es inzwischen sehr schöne Objektive wie das 18-105 F4 und das 10-18 F4 für das NEX-Bajonett gibt. Doch vor knapp zwei Jahren war daran nicht zu denken, und so blieben die beiden Platzhirsche Canon und Nikon plus der Herausforderer Sony mit seinen technischen Innovationen. Denn Sony bot nicht nur die (potentiell Licht kostende) SLT-Technik, die ein echtes WYSIWYG ohne beschnittenen Liveview-Modus wie bei der Konkurrenz ermöglicht, sondern ebenso einen tollen digitalen Sucher (aus meiner Sicht den kleinen optischen Suchern der Einsteiger-DSLR überlegen) und etwas, dass es maximal für Nikon als Aufsteckgerät gab: Automatisches Geotagging der Bilder durch In-Camera-GPS.</p>
<p>Also habe ich die Sony α65 bestellt und nach ein paar Monaten <a href="http://futurezone.at/b2b/flut-verzoegert-produktstart-von-sonys-nex-7/24.572.213">Verzögerung durch die Flutkatastrophe in Asien</a> besaß ich endlich eine eigene “ernsthafte” Kamera. Diese hat mich inzwischen um den halben Globus begleitet und mir viel Freude bereitet. Dennoch gibt es einige Punkte zu kritisieren, womit ich auf den oben verlinkten Artikel zurückkomme.</p>
<p>Die Sony benötigt keinen Kontrastautofokus, weil sie dank des durchlässigen Spiegels gleichzeitig (phasen-) fokussieren und mit dem Sensor aufnehmen kann. Geschwindigkeitsprobleme konnte ich dementsprechend nicht beobachten, doch zwei Punkte trüben die Erfahrung etwas. Das Eine sind die wenigen Autofokuspunkte, die noch dazu alle sehr zentral angeordnet sind. Eine Bildkomposition ist so oft nur durch vorheriges Fokussieren mit anschließendem Schwenken des Bildausschnittes möglich - bei 24 Megapixeln werden jedoch kleinste Schärfeabweichungen sofort evident. Für zeitunkritische Aufnahmen hätte ich also gerne einen Kontrastautofokus als Option gehabt.</p>
<p>Desweiteren fehlt der α65 im Gegensatz zur größeren Schwester α77 ein Autofokushilfslicht für schwierige Lichtbedingungen. Zuletzt gab es einige Situationen, in denen ich es schmerzlich vermisst habe. Ärgerlich ist in diesem Zusammenhang, dass zwar ein Vorblitz den Autofokus unterstützen kann - allerdings nur in den Auto-Modi. Ich dagegen fotografiere fast ausschließlich in den PASM-Modi.</p>
<p>Eine weitere Software-Beschränkung trennt die beiden Kamera-Schwestermodelle: Der Auto-ISO-Modus ist auf 100-1600 beschränkt und kann nicht angepasst werden. Dabei konnte dies bereits meine Hosentaschenkamera und bei Olympus jede Systemkamera im Portfolio. Meine Erfahrung ist, dass ISO 1600 bei 24MP oft zu viel für die Kamera ist. Ich würde also gerne 100-800 einstellen, werde jedoch im Gegensatz zur α77 durch die Firmware daran gehindert. Ich würde mir wünschen, dass Sony seine Modelle durch die Hardware voneinander abgrenzt und nicht künstliche Softwarebeschränkungen einbaut.</p>
<p>Das gleiche Spiel findet sich bei den Bildreihen. So toll der Serienbildmodus mit 10 Bildern pro Sekunde ist, bei den Belichtungsreihen gibt es maximal drei Aufnahmen in Folge und der Bereich kann nur zwischen 0 und 0,7EV gewählt werden. Die α77 wiederum beherrscht 5 Aufnahmen und 3EV Unterschied. Aus diesem Grund steuere ich HDR-Aufnahmen inzwischen voll manuell über die Belichtungszeit, die ich abhängig vom Histogramm einstelle.</p>
<p>Wo ich schon beim nächsten Punkt bin: Für das Display und den digitalen Sucher kann ich aus 6 bzw 5 Anzeigemodi auswählen. Eine individuelle Kombination von anzuzeigenden Elementen, also z.B. das Histogramm zusammen mit der Horizontanzeige, ist jedoch nicht möglich. Ebenso kann ich zwar die Funktionen einiger Knöpfe an Rück- und Oberseite anpassen, eine Kombination von Einstellungen als persönliche Vorgabe im Moduswählrad gibt es jedoch nicht. Hier zeigt mir Sony mehr als deutlich, dass ich nur eine Prosumer-Kamera erworben habe und kein Profimodell. Trotzdem sollte sich nicht schon nach einem Jahr der Gummi der Daumenablage lösen!</p>
<p>Was sich im Nachhinein als negativ herausgestellt hat, ist ironischerweise Sonys Innovationsgeist, der mich erst zu der Firma hinzog. Denn in den letzten anderthalb Jahren hat Sony vor allem daran gearbeitet, sein Angebot im Bereich der spiegellosen Systemkameras auszubauen. Viele Modelle und Objektive der NEX-Serie bis hin zu den neuen Fullframe-Kameras A7/A7R haben die Resourcen der Entwicklungsabteilung gebunden, so dass für den A-Mount nur wenig neues Glas erschienen ist.</p>
<p>Dieses Problem haben Käufer einer OM-D E-M5 nicht. Olympus konzentriert sich voll auf seine m43-Kameras und verbessert sie stetig. Sofort überzeugt hat mich die M5 aber nicht, als ich sie Ende Mai in den Opernwerkstätten Berlin ausprobieren konnte. Dies lag teilweise am Konzept des Fotografie-Spielplatzes, dessen 12 Installationen einfach zu wenig Licht boten, um vernünftige Belichtungszeiten zu ermöglichen, und teilweise am schlechten Standardobjektiv, welches ich als deutlich limitierend empfand. Der nicht vorhandene Blitz tat sein übriges, so dass ich vor allem eines fotografiert habe: Viel Rauschen bei ISO 1600.</p>
<p>Auch der Weißabgleich hatte seine Probleme, in der schwierigen Lichtsituation die Farben korrekt wiederzugeben. Das kenne ich jedoch ebenso von der Sony, die bei abnehmenden Licht schnell zu kalte Farben produziert.</p>
<p>Trotzdem konnte ich mich davon überzeugen, dass der Kontrastautofokus der M5 wirklich schnell ist und der 5-Achsen-Bildstabilisator besser arbeitet als der Steady Shot in meiner Sony. Dieser gerät teilweise schon bei 125mm Brennweite und gutem Licht an seine Grenzen, so dass ich ihn genausogut ausschalten kann. Dank einer Zusammenarbeit von Sony und Olympus wird es den 5-Achsen-Stabilisator aber bald auch in Sony-Modellen geben.</p>
<p>Bei meiner Kamerawahl war ein möglichst kleinen Gehäuse ein Wunschfaktor - mit der M5 in der Hand wurde mir klar, dass es auch zu klein gibt. Denn die Knöpfe der Olympus sind für meine großen Finger nur schwer zu bedienen; das Drehrad um den Auslöser ist viel zu hakelig. Einzig das Display überzeugte mich mit seiner Helligkeit und der Touchfunktion, aber beim winzigen und viel zu grellen digitalen Sucher sehnte ich mich zu meiner α65 zurück.</p>
<p>Bei der Wahl zwischen meiner Sony und der M5 würde ich deshalb wieder zur α65 greifen. Trotz aller Einschränkungen ist sie mindestens so leistungsfähig wie die Olympus mit dem kleineren Bildsensor, was auch <a href="http://www.dxomark.com/Cameras/Compare-Camera-Sensors/Compare-cameras-side-by-side/(appareil1)/793%7C0/(brand)/Olympus/(appareil2)/735%7C0/(brand2)/Sony">DxoMark bestätigt</a>.</p>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/kingoli\.net\/blog\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>