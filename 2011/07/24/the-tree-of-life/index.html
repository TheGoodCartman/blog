<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.9.12">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>The tree of life – The KingOli Blog</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../">
<link href="../../../../k-typewriter.png" rel="icon" type="image/png">
<script src="../../../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../site_libs/quarto-html/quarto-syntax-highlighting-cdaacfc258cb6f151192107f105ac881.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../site_libs/bootstrap/bootstrap-1db3f541d99483cdc7a0d9cf38862b2c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../../k-typewriter.png" alt="" class="navbar-logo light-content">
    <img src="../../../../k-typewriter.png" alt="" class="navbar-logo dark-content">
    </a>
    <a class="navbar-brand" href="../../../../index.html">
    <span class="navbar-title">The KingOli Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/TheGoodCartman"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">The tree of life</h1>
  <div class="quarto-categories">
    <div class="quarto-category">gesehen</div>
  </div>
  </div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">24.07.2011 20:12</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><em>USA (2011) Regie: Terrence Malick Darsteller: Brad Pitt (Vater), Jessica Chastain (Mutter), Sean Penn (erwachsener Jack), Hunter McCracken (junger Jack), Laramie Eppler (R.L.), Tye Sheridan (Steve) und ein paar Dinosaurier</em> <a href="http://www.tree-of-life-film.de/">Offizielle Homepage</a></p>
<p>Da macht der Regie-Altmeister Terrence Malick seinen erst dritten Film in den letzten dreizehn Jahren, holt nach fast dreijähriger Postproduktion die Goldene Palme in Cannes und doch - ich kann und werde ihn nicht weiterempfehlen. Jedenfalls nicht als Film, denn den erzählerischen Konventionen dieser Kunstform entzieht sich <em>The tree of life</em> fast völlig und setzt den Zuschauer einem Strom von Bildern aus, der in weiten Teilen eine verknüpfende Handlung missen lässt.</p>
<p>Lange Blenden, die keinen inhaltlichen Abschluss der Szene darstellen, reihen sich dabei an abgehackte, verspielte Schnitte und fast traumhaft anmutende Sequenzen. Mehr emotional als durch Kontinuität miteinander verbundene Einstellungen nehmen die Bewegungen der Darsteller auf; die Kamera folgt diesen fast tänzerisch.</p>
<p>Passend dazu ist auf der akustischen Ebene fast nur der klassische Soundtrack zu hören, der zwar die Bilderflut unterstützt, aber durch den weitestgehenden Verzicht auf Dialoge den Zugang zur tröpfelnden Handlung weiter erschwert. Dazu kommen die schon bei <em>The new world</em> exzessiv eingesetzten Kommentare aus dem Off, die meist nur geflüstert werden und sich selten auf das parallel gezeigte beziehen. Es sind Gebete an Gott und Zitate, die der Zuschauer so zu hören bekommt, und ich persönlich bin kein großer Fan dieses Stilmittels, da eine Zuordnung zu den Sprechern und zum Handlungszeitpunkt schwer fällt. Aber in Terrence Malicks Kunstwerk von Film scheinen diese Aspekte kein Gewicht zu haben, es geht ausschließlich um den Inhalt und die Wirkung der Kommentare; Zeit und Ort erscheinen nebensächlich.</p>
<p>Ein weiteres künstlerisches Mittel, das dieser Maxime folgt, ist, dass fast keine Namen genannt werden. Außer den Hauptfiguren werden alle Charaktere immer nur mit ihren Rollen angesprochen (oder wie viele Nebenfiguren gar nicht erläutert): Vater, Mutter, Bruder, Sohn. Die Personen werden zu Archetypen stilisiert, an deren Beispiel allgemeine Diskurse geführt werden. Dabei gibt es durchaus eine Handlung, die sich hinter der ganzen verwirrenden Fassade abspielt, und die diese Verschleierung und Degradierung als esoterische Fragen transportierendes Vehikel nicht verdient. Aber Terrence Malick versucht unter dem Deckmantel der Kunst, künstlich Details zu Schwerpunkten zu erheben, die insgesamt gesehen eine einheitliche Interpretation verhindern.</p>
<p>Ich will mich trotzdem daran versuchen und mich dem Film annähern, indem ich ihn ihn in fünf Abschnitte unterteile und diese nacheinander analysiere. Die Grenzen zwischen den Abschnitten ziehe ich da, wo Malick wiederholt ein Bild des Geburtsvorganges bemüht - jedenfalls verstehe ich das Gesehene so, wenn auf der Leinwand <a href="http://www.youtube.com/watch?v=sqb88gdCM4Q">ein rot-weißes, bézierartig die Form wechselndes Etwas</a> zu sehen ist. Ob dies die Geburt des Universums mit sich ausdehnenden Gasen oder der Blick durch den menschlichen Geburtskanal verbildlichen soll ist dabei fast nebensächlich, da beides unterschiedliche Formen eines Ursprungs sind und jeweils in den Kontext des Films passen.</p>
<p>Der erste, ca zehnminütige Abschnitt stellt einen ständigen Wechsel zwischen beeindruckenden Aufnahmen von Naturschauspielen und einer Szene dar, in der eine Mutter zu Hause die Nachricht erhält, dass einer ihrer Söhne im Alter von neunzehn Jahren gestorben ist. Der Vater empfängt die Nachricht auf der Arbeit, und beide sind am Boden zerstört und erinnern sich an einzelne Ereignisse aus der Kindheit des toten Sohnes. Der Zuschauer sieht sie schließlich noch nach der Beerdigung, wenn eine Freundin / Verwandte (?) die Mutter aufzubauen versucht, indem sie darauf verweist, dass ihr ja noch zwei Söhne bleiben. Doch keiner dieser Söhne ist zu sehen, die Familie scheinbar zerstritten.</p>
<p>Wie fast der gesamte Film wird dies sehr fragmentarisch, mit schnellen Szenenwechseln, vielen Schnitten und fast ohne Dialoge erzählt. Aus dem Off hört man die Mutter klagen und fragen, wie sie je wieder glücklich leben kann, wo sie doch nicht mehr bei ihrem Sohn ist, der sie braucht. Gleichzeitig erinnert sie sich an ihre christlichen Lehre und die dort gepredigten Wege des Lebens: Es gibt den Weg der Natur und den Weg der Gnade. Ersterer ist hart und ohne Erbarmen, setzt auf das Überleben des Stärkeren und wird vor allem durch den Vater verkörpert. Bei aller Härte hat die Natur aber unglaubliche Schönheit hervor gebracht, wie die Schnitte zu Wasserfällen und idyllischen Feldern zeigen, so dass dieser Weg keinesfalls als Irrweg dargestellt wird. Der Weg der Gnade dagegen lebt vom Verzeihen und vom Überwinden der eigenen Natur; die Mutter versucht danach zu leben und offen und herzlich zu sein, und wird doch vom Schicksal so hart getroffen.</p>
<p>Im zweiten Abschnitt zeigt uns der Regisseur ihren ältesten Sohn, Jack, als erwachsenen Mann. Er lebt in einem Designerhaus, arbeitet in Palästen aus Glas und Beton und scheint die zwei Wege seiner Eltern als Vermächtnis in sich zu tragen, wenn er in Erinnerungen schwelgend unter dem einzigen Baum zwischen den Wolkenkratzern spaziert. In einem Telefonat mit seinem Vater sagt er diesem, dass er ihm verzeiht. Terrence Malick bemüht hier sehr ruhige Bilder, die aufgrund der hellen Kulissen äußerst steril wirken. Sean Penn macht dazu durchgehend ein unglückliches Gesicht, doch der Zusammenhang der Fragmente bleibt vorerst im Dunkeln.</p>
<p>Danach folgt der anstrengendste Teil des Films. In gut zwanzig Minuten bricht über den Zuschauer eine die Entstehung des Lebens nachvollziehende Bilderflut herein, die mit einem sinfonischen Soundtrack unterlegt ist, der auch vor Smetanas Moldau nicht halt macht. Vom Urknall über die Ausbreitung der Galaxien, die Entwicklung der Erde vom Vulkanplaneten zum Brutbecken für die erste Zellteilung reiht sich eine animierte Bildcollage an die andere. Bald steigen die ersten Lebewesen aus dem Meer ans Land und entwickeln sich zu den Dinosauriern, bis ein Einschlag eines riesigen Meteoriten dieser Spezies ein Ende bereitet und Platz schafft für den Menschen.</p>
<p>Die einzelnen Szenen dieser visualisierten Urknalltheorie finden jedoch keine geeigneten Übergänge ineinander, jede stellt für sich eine Einzelstück dar und lässt einen übergreifenden Takt missen. Worauf das hinausläuft ist dem Zuschauer schnell klar, und doch wird er weiter Szenen ausgesetzt, die ihrer geringen Bedeutung gegenüber eine viel zu lange Laufzeit haben. Das Ganze ist ein einziger visueller Overkill, inhaltlich nichtssagend und doch leinwandsprengend. Und zwischen all der bombastischen Langeweile versteckt sich eine Szene, die zumindest im Filmkontext sinnvoll ist, aber ansonsten an der Ernsthaftigkeit des Gezeigten zweifeln lässt. Da wird ein Dinosaurier gezeigt, der in einem Flussbett am verenden ist. Ein anderer Dino kommt heran und stellt seinen Fuß auf den Kopf des Anderen, während er ihm in die Augen blickt. Doch anstatt die leichte Beute zu verspeisen, lässt er ihn so liegen wie er ihn fand und trottet von dannen.</p>
<p>Den ersten Akt der Gnade auf der Erde soll diese Szene wohl darstellen, wenngleich ich mich frage, warum der Regisseur dafür die Dinosaurier bemüht. Da ist zwanzig Minuten lang eine Entstehungsgeschichte zu sehen, die als aktueller Stand der Wissenschaft angesehen werden kann und ganz klar der biblischen Vorstellung von der Genesis widerspricht, und dann spricht Malick den Dinosauriern eine kognitive Leistung zu, die ihnen niemand sonst zutraut und die gleichzeitig anachronistisch einem christlichen Motiv entspricht. Aber so widersprüchlich ist der gesamte Film; ich jedenfalls saß im Kino und traute meinen Augen nicht.</p>
<p>Danach folgte zum Glück der längste Abschnitt des Films, der noch am ehesten meinem Verständnis dieser Kunstform entspricht. Denn die nun folgende Kindheit von Jack wird chronologisch erzählt, es gibt (endlich!) Dialoge und auf der inhaltlichen Ebene ergeben sich langsam Schnüre aus den losen Fäden, die dem Zuschauer bis dahin präsentiert wurden. Dennoch bleibt der Inszenierungsstil fragmentarisch, die von unterschiedlichen Charakteren stammende Kommentierung und die Blickwinkel und Figuren in den Szenen legen nahe, dass es sich um miteinander verbundene Erinnerungen der einzelnen Familienmitglieder handelt.</p>
<p>Es beginnt mit der Geburt von Jack in den 50er Jahren der USA. Der Junge wächst in scheinbar paradiesischen Zuständen auf, umhegt und geliebt von seiner Mutter, die Natur ständig um ihn herum. Dann folgen seine beiden Brüder, die ihm die Liebe der Mutter streitig machen, und erste Risse in der Beziehung der Eltern tauchen auf. Der Vater verliert seinen Job, reist in der Welt herum und bleibt beruflich erfolglos. Deshalb drillt er seine Söhne, damit diese sich erfolgreicher in der harten Welt durchsetzen können als er. Dies führt zwangsläufig zu Konflikten mit seiner Frau, die während der Abwesenheiten des Vaters ihre Vorstellung von Erziehung lebt - den Weg der Gnade.</p>
<p>Jack nimmt seinen Vater meist als ungerecht und autoritär wahr, und stellt sich und Gott die Frage, warum dies so ist. Warum sich seine Eltern streiten und warum er bestimmte Dinge nicht tun soll. Als Anführer einer Gruppe Gleichaltriger macht er zudem Erfahrungen mit Vandalismus, Diebstahl und probt ebenso Elemente der Gewalt an seinem kleineren, folgsamen Bruder. Den Grund, weshalb er dafür vom Vater bestraft wird, obwohl er gefühlt dessen vorgelebtes Verhalten nachgeahmt hat, versteht Jack nicht. Der Wandel der Unschuld hin zum Begreifen, dass er in eine Welt voller moralischer Regeln hineinwächst, in der jeder einen anderen Weg des Lebens beschreitet, führt zu einer Unsicherheit in Jack, die bis in sein erwachsenes Leben hineinreicht. Als das Aufbegehren von Jack immer größer wird und er auch gegen die Mutter rebelliert, die damit ebensowenig klarkommt, endet dieser vierte Abschnitt abrupt und ohne wirkliche Auflösung der Konflikte mit dem Wegzug der Familie aus ihrem Haus, weil der Vater einen neuen Job bekommen hat.</p>
<p>In der letzten Phase des Films sieht der Zuschauer noch einmal den erwachsenen Jack. Er läuft zwischen Felsformationen und durch Dünen, durchschreitet einen in der Landschaft stehenden Türrahmen und gelangt schließlich an einen Strand. Dort laufen viele Menschen in langen, weißen Kleidern durch das Bild und die Kamera fängt bald auch die Mutter ein. Sie hat ihren toten, mittleren Sohn wieder gefunden und umarmt ihn; auch der Vater und Jacks kleinster Bruder kommen dazu und die gesamte Familie ist wieder in einem Paradies vereint.</p>
<p>An dieser Stelle hat Jack also scheinbar seinen inneren Frieden gefunden, die verschiedenen in ihm kämpfenden Einstellungen der Eltern zu einem funktionierenden Bild zusammengesetzt. Wie genau dieses aussieht wird nicht klar, aber der Film kommt so zu einem plakativ optimistischen Ende, das doch keine Frage beantwortet. Was mir fehlt ist eine durchgängiges Linie, die zum Beispiel die Auswirkungen der geschilderten Kindheit auf den erwachsenen Menschen aufzeigt. Der Jack der Gegenwart scheint Probleme zu haben, doch diese werden nie klar noch wird anderen Teilen seines Lebens (inklusive der Gegenwart) Zeit zur Darstellung gelassen. So ausgiebig die Schilderung von Jacks Aufwachsen ist, so wenig scheint Malick an einer Psychologisierung seiner Charaktere zu liegen. Wichtiger sind ihm übergreifende, tief in der Menschheit verankerte Themen und der immerfort währende Kampf zwischen Natur und Ethik, die sich beispielhaft in der christlichen Anschauung der Mutter manifestiert.</p>
<p>In diesem Sinne lässt sich auch der Filmtitel verstehen. Ein Lebensbaum benötigt wie jeder Baum breite Wurzeln, damit eine prächtige Krone gedeihen kann. Die Wurzeln der Menschheit reichen für Malick zurück bis zum Urknall, die von Jack liegen in seinen Eltern und der Kindheit. Warum diese simple Aussage jedoch in 138 Minuten so langatmig präsentiert werden muss, verstehe ich nicht.</p>
<p>Fazit: <em>The tree of life</em> will über vieles reden. Über den Menschen und die Natur, über die Evolution und die Religion, über das Aufwachsen und die Prägung eines Menschen. Doch leider verzichtet er auf einen nachvollziehbaren Handlungsaufbau und versteckt seinen Diskurs hinter einem schwer erträglichen Schwulst von ausufernden Bildern, die erdrückt vom bombastischen Soundtrack ihr Ziel und damit auch ihr Publikum verfehlen.</p>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/kingoli\.net\/blog\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>