<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.9.16">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Two Worlds II – The KingOli Blog</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../">
<link href="../../../../k-typewriter.png" rel="icon" type="image/png">
<script src="../../../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../site_libs/quarto-html/quarto-syntax-highlighting-a67ac2868200dddf7a4f0e3ae403775c.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../site_libs/bootstrap/bootstrap-86021494fdb264b41bb370614a82db5e.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../../k-typewriter.png" alt="" class="navbar-logo light-content">
    <img src="../../../../k-typewriter.png" alt="" class="navbar-logo dark-content">
    </a>
    <a class="navbar-brand" href="../../../../index.html">
    <span class="navbar-title">The KingOli Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/TheGoodCartman"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Two Worlds II</h1>
  <div class="quarto-categories">
    <div class="quarto-category">gespielt</div>
  </div>
  </div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">29.01.2011 00:12</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>Wenn ich mir aussuchen könnte, wie ein perfektes OpenWorld-Rollenspiel aussieht, dann wäre es wohl eine Mischung aus <a href="../../../../2010/10/24/risen/">Risen</a> und <em>Two Worlds II</em>. Denn letzteres macht vieles von dem richtig, was ich am Spiel der <em>Piranha Bytes</em> zu kritisieren hatte.</p>
<p>Das fängt an mit der fantastischen Lernkurve. Zu Beginn wird der Spieler an die Hand genommen und erfährt die Grundzüge der vier Kernattribute (Stärke für Nahkampfschaden, Präzision für Fernkampfschaden, Willensstärke für Magieanwendungen und Durchhaltevermögen für Lebenspunkte und Inventargröße). Mit zunehmender Erfahrung und den im Schwierigkeitsgrad angenehm ansteigenden Quests wird ein Steigern der vielen Skills notwendig; wobei diese durch Bücher erlernbaren und danach ausbaubaren Fertigkeiten erst nach und nach gefunden werden. Und als ich endlich dachte, das Ende dieser Lernkurve erreicht zu haben, da kamen mir plötzlich Gegner in die Quere, die zwingend taktisches Kämpfen und vor allem die richtige Dosierung aus Nahkampf und magischen Talenten benötigten.</p>
<p>Denn <em>Two Worlds II</em> ist kein Spiel, in dem sich der Spieler spezialisieren muss. Vielmehr ist Vielseitigkeit gefragt; jeder Gegner hat andere Resistenzen gegenüber den sieben Schadensarten (scharfe Waffe, stumpfe Waffe, Feuer-, Eis-, elektrischer, spiritueller und Giftschaden) und kann sich unterschiedlich gut gegenüber Nah- und Fernkämpfern verteidigen. So gibt es Rieseninsekten, die ständig aus einem Block heraus angreifen und nur durch Magie zu bezwingen sind. Manchmal muss ich Kampfgenossen aus dem Tier- wie Totenreich beschwören, die den Gegner ablenken, während ich aus sicherer Entfernung heraus dessen Schwachpunkte gezielt angreife; an anderen Stellen verteidigen große Exemplare einer Gattung namens Taedium ihre kleineren Gefährten (Nachwuchs?) und können nur am Rücken verletzt werden.</p>
<p>Durch die verschiedenen Magievarianten und die Optionen im Nahkampf (Waffe und Schild, Zwei Einhandwaffen, eine Zweihandwaffe, Waffen mit Schwertschaden, Keulen mit Hiebschaden) kann sich jeder Spieler seinen Charakter frei entwickeln, so er genügend flexibel ist, für jeden Gegner eine Option zu haben. Ein Verleveln gibt es deshalb nicht. Und sollte trotzdem einmal der Bedarf bestehen, bereits verteilte Erfahrungspunkte umzuordnen, dann gibt es in jeder größeren Stadt einen NPC, der für 500 Goldstücke den Charakter auf den Ausgangszustand zurücksetzt und die Skillpunkte wieder freisetzt.</p>
<p>Diese Bandbreite an Möglichkeiten setzt sich auch bei den Ausrüstungsgegenständen fort. Wo <em>Risen</em> nur eine Handvoll Komplettrüstungen anbietet, darf in <em>Two Worlds II</em> von den Schuhen und Handschuhen, über Hosen, Harnisch und Helm jedes Detail der eigenen Rüstung beliebig kombiniert werden. Und die Auswahl ist wirklich groß, auch wenn sich die Eigenschaften nur minimal unterscheiden und Rüstungssets leider buggy sind. Doch an dieser Stelle kommt der nächste große Pluspunkt des Spiels zum Tragen: Jeder Ausrüstungsgegenstand, egal ob Waffe oder Kleidungsstück, darf innerhalb der Fähigkeiten des Charakters verbessert werden.</p>
<p>Dafür werden Grundbestandteile wie Holz und Eisen benötigt, welche gewonnen werden, indem andere Inhalte des Inventars zerlegt werden. Da das zu tragende Gewicht begrenzt ist und nur geringe Erlöse beim Verkauf von gesammelten Ausrüstungsgegenständen erzielt werden, habe ich viel Spielzeit im Inventar mit einem immer gleichen Ablauf verbracht: Zuerst zerlege ich die neu aufgesammelten Waffen und Kleidungsstücke, unter denen sich nur selten verbesserte Exemplare finden, und werte mit deren Rohstoffen meine Schwerter und Rüstungen auf. Je nach Klasse des Gegenstands sind die Zuwächse in Schaden oder Rüstungswerten beträchtlich, und mit steigendem Level können auch Kristalle hinzugefügt werden.</p>
<p>Diese gibt es in verschiedenen Ausprägungen, von Schadens- und Schutz- über Werte- und Skillkristalle bis hin zu Finalisierungssteinen, die einen weiteren Ausbau des Gegenstandes verhindern, aber als Entschädigung die durch Kristalle hinzugefügten Boni vervielfachen. Und als wäre dies nicht Customizing genug, können die Kleidungsstücke auch mit Farben dem eigenen Geschmack angepasst werden.</p>
<p>Eine weitere Besonderheit an <em>Two Worlds II</em> sind die Zauber. Denn diese sind nicht vorgefertigt und müssen erlernt werden, sondern sind ebenso flexibel wie Waffen und Rüstungen an die eigenen Bedürfnisse anpassbar. Die Grundlage bilden fünf Magieschulen (Feuer, Wasser, Wind, Erde, Nekromantie) und Zauberamulette, die je nach Bestückung mit magischen Karten verschiedene Zauberwirkungen erlauben. Diese reichen von klassischen Angriffszaubern über Verzauberungen, Beschwörungen und Erschaffen von Altären bis hin zu Zaubern, die Schlösser magisch öffnen. Nicht jede Wirkung ist aus der Kombination der Karten sofort ersichtlich, so dass viel herumexperimentiert werden muss, bis die maximale Ausbeute aus den gegebenen Karten erzielt wird.</p>
<p>An das ebenso komplexe System des Tränkebrauens habe ich mich nicht gewagt, da ich mit den gefundenen Tränken gut ausgekommen bin. Manche Gebräue steigern die Kernattribute um 100% und sind damit ebenso wichtige Faktoren in den Kämpfen wie der gezielte Einsatz der erlernten Skills - wie gesagt ist <em>Two Worlds II</em> an einigen Stellen taktisch sehr fordernd, während es manchmal einfach ausreicht, die Schwächen der KI auszunutzen. Dass die Gegner dem Charakter nach Angriffen nicht weit folgen ist ja noch zu verschmerzen, aber oft bleiben sie an Kanten in der Landschaft hängen oder lassen sich aus sicherer Entfernung beschießen, weil der Spieler zu weit weg ist. Dieselben Probleme haben leider auch die zur Unterstützungen beschworenen Kreaturen, die nicht immer den Weg zum Gegner finden oder in Höhlen gar nicht erscheinen, weil anscheinend nicht genügend Platz für sie da ist.</p>
<p>Es ist also nicht alles Gold an diesem Spiel. So ist das Inventar - dafür dass ich große Anteile der Spielzeit darin verbracht habe - eine einzige Qual. Es gibt nur vier Kategorien, in denen die aufgelesenen Gegenstände abgelegt werden, und von denen ist nur die Magiesektion übersichtlich, da es nicht sehr viele unterschiedliche Karten gibt und gleiche Exemplare nur einen Platz einnehmen. Bei den Waffen jedoch verbraucht jede Einzelne einen Platz, und da die Icons konsolengerecht groß geraten sind muss viel gescrollt werden. Waffen, Rüstungen und Rohstoffe haben zwar eine gewisse Ordnung, aber manche magischen oder mit Namen versehenen Items werden außerhalb der normalen Ordnung einsortiert, so dass ich ständig auf der Suche nach gerade aufgesammelten Gegenständen war. Zudem fehlte eine Ansicht, welche Items der Charakter gerade angelegt hat; diese werden nur durch schwach sichtbare Rahmen hervorgehoben. So habe ich ausprobieren müssen, wie viele Ringe (4) und Amulette (1) der Held anlegen kann und dass ein für das Meucheln benötigter Dolch immer parallel zu der normalen Bewaffnung getragen werden kann. Vor dem Anlegen eines Items werden zwar die Unterschiede zum aktuell getragenen angezeigt, eine Übersicht über den kompletten Rüstungswert fehlt jedoch und nur beim Überfahren einer angelegten Waffe werden die Schadenswerte eingeblendet.</p>
<p>Die Tastenbelegung ist ein weiterer Kritikpunkt des Spiels. Es hat sich bei RPGs eigentlich eingebürgert, dass das Inventar auf I liegt und die Karte auf M. Bei <em>Two Worlds II</em> liegen standardmäßig alle wichtigen Shortcuts auf den F-Tasten und die Aktionstaste ist doppelt belegt mit Springen - oft wechselt der Cursor kurz vorm Tippen noch weg von einer Truhe und anstatt sie zu öffnen springt der Charakter darüber. Seit dem 1.1er Patch kann diese Doppelbelegung geändert werden - nicht geändert wurde jedoch das Problem, dass die rechte Maustaste gleichzeit für Sprinten, Schleichen und Blocken genutzt wird. Eine Bewegung während eines Blocks führt so entweder dazu, dass der Held etliche Meter am Gegner vorbeirennt oder sich in Schleichhocke duckt - beides natürlich ungewollt.</p>
<p>Die nette Idee mit den drei Slots für drei Ausrüstungskombinationen ist ebenso mangelhaft umgesetzt. Da eine Spezialisierung des Charakters nicht notwendig ist, können so der Nahkämpfer, der Bogenschütze und der Magier mit jeweils eigenem Equipment ausgerüstet werden und ein aufwendiges Umrüsten entfällt. Doch anstatt jeden der drei Slots direkt anwählen zu können, gibt es zwei Tasten, die vorwärts und rückwärts durch die Kombinationen schalten. Ich kam ständig durcheinander, mit welcher Taste ich nun welche Ausrüstung als nächstes auswähle - nur eine Taste mehr hätte dem Feature den nötigen Schliff gegeben. Da im Solospiel der Slot auch im Inventar direkt angewählt werden kann, bin ich meist diesen Weg gegangen, da dort zugleich auch das Spiel pausiert. Im Multiplayer muss jedoch mit der Verzögerung beim Wechsel gelebt werden, die durchaus ein paar Sekunden beträgt.</p>
<p>Etwas ärgerlich ist, dass im Inventar immer nur die im aktuellen Slot angelegten Ausrüstungsgegenstände hervorgehoben werden. Schnell sind da Gegenstände zerlegt oder verkauft, die der Charakter auf einem anderen Slot ausgerüstet hat - beim einem Wechsel lief mein Bogenschütze plötzlich in Unterhosen umher und konnte sich nicht bewegen, weil er die gewichtssteigernden Ringe nicht angelegt hatte und so zu viel mit sich herumtrug. Dieses eigentlich sehr nützliche Feature kann also ruhig noch etwas Finetuning vertragen.</p>
<p>Ebenso verbesserungswürdig ist die Map des Spiels. Unbegreiflicherweise haben fast alle markierten Punkte (Gebäude, NPCs, Altare) ähnliche Pinfarben, so dass sie nur schwer zu unterscheiden sind. Zudem sind Altare gar nicht beschriftet und die Teleporter tragen in einem ansonsten vorbildlich lokalisierten Spiel die englischen Namen, was sich mit dem Questlog nicht verträgt, in dem die Orte übersetzt wurden. Da die Karte nur bis auf eine gewisse Höhe hineinzoomt und keine Innenkarten oder eine Automap kennt, habe ich oft lange nach NPCs suchen müssen (vor allem im mehrstöckigen Gebäude der Universität von New Ashos). Und auch in auf mehreren Ebenen angelegten Dungeons (die leider durch immer gleiche Höhlenräume langweilen) ging die Orientierung schnell flöten, besonders in den Labyrinthen der Hohepriester.</p>
<p>Doch genug gemeckert, denn das wichtigste Argument, weshalb man <em>Two Worlds II</em> spielen sollte, habe ich noch gar nicht erwähnt. Das Highlight des RPGs sind eindeutig die Quests, die sich vom gewohnten Fantasy-Einerlei wohltuend abheben. Die Entwickler scheinen sich die Frage gestellt zu haben, wie eine Welt aussehen würde, in der Magie zwar etwas alltägliches, aber trotzdem elitäres ist, da sie schwer zu erlernen ist. So besucht der Charakter auf seiner Suche nach der Schwachstelle seines Nemesis Gandohar die Universität, an der das Magietalent ein scheinbar gescheitertes Experiment mit zerstörerischen Folgen vollzog (dies erinnert stark an <a href="../../../../2008/11/23/harry-potter-and-the-deathly-hallows/">Harry Potter und die Suche nach Voldemorts Horkruxen</a>). An dieser Uni geht es jedoch hoch her: Ein Professor erfüllt seine privaten Fantasien, indem er Studentinnen erpresst, während eine Professorin die erniedrigten Mädchen danach in einem Begleitservice anstellt. Ein als Informant wichtiger Professor hat es sich im exquisiten Club des Unterweltkönigs eingerichtet und frönt dort den Leidenschaften des Würfelspiels, während einer seiner Student ein Wesen beschwort, welches ihm ermöglicht, während der Prüfungen telepathische Spickzettel zu verschicken. Doch der gerufene Geist entwickelt ein Eigenleben und führt bei den Kommilitonen, an die der Zauber verkauft wurde, zu schweren Depressionen, so dass der Held aushelfen muss.</p>
<p>Ein anderer, gescheiterter Magieadept schickt den Charakter in das Anwesen seiner Mutter, welches diese mit fiesen Monster bevölkern ließ, damit das gierige Studentenpack ihr nicht alle Kräuter aus dem Garten stiehlt. Dort fand ich die vermisste Frau nur noch tot auf. Daraufhin erklärte mir der Student, dass er einen grausamen Verdacht hegt - in seiner Sammlung aus Sanduhren steht jede Uhr für das Leben eines Bekannten des Studenten. Ich sollte für ihn nun einen ehemaligen Professor warnen, dass sein Lebensende kurz bevorsteht. Doch schnell stellt sich heraus, dass der Student in Wahrheit die Menschen erpresst und Zahlungsunwillige wie die eigene Mutter höchstselbst um die Ecke bringt, um die anderen Opfer zu überzeugen. Mit dieser Tour ist er aber an den falschen Helden geraten…</p>
<p>Die Menschen der Welt von <em>Two Worlds II</em> lassen sich also grob in zwei Kategorien einordnen: Verschlagene, manipulierende Gauner und arme Opfer (manchmal auch der eigenen Unfähigkeit) - etwas dazwischen gibt es so gut wie gar nicht. Da habe ich mich doch über jeden Auftrag der Nekromanten gefreut, frei nach dem Motto: Mit dem Tod ist das Leben noch lange nicht zu Ende. So durfte ich bei Teeparties auf dem Friedhof aushelfen, vermisste Köpfe zu ihren Leichen schaffen, untote Schirme bekämpfen, Biber für schwarzes Kerzenfett erlegen und Hochzeitskleider in Wildschweinblut tränken.</p>
<p>In diesem Spiel wird auch jeder noch so abwegige Gedanke zu Ende gedacht. So traf ich eine junge Frau, deren Freund verschollen ist. Dieser verstand sich hervorragend darauf, Ringe mit Flüchen zu versehen. Damit seine Freundin ihm treu bleibt, hat er ihr einen Ring geschenkt, der alle einen schnellen Tod ereilen lässt, die sich an ihr vergreifen. Nun hat sich eine stattliche Anzahl an Opfern angesammelt, die trotz ihres Dahinscheidens noch immer die Welt als Geister heimsuchen und natürlich nicht gut über die junge Frau reden. Der für jede Quest zu habende Held muss nun die ehemaligen Liebhaber irgendwie zum Schweigen bringen und erfährt so, dass die Frau nichts unversucht gelassen hat, um etwas Liebe zu erfahren. Von Frauen bis hin zu kaum zu Wortartikulationen fähigen Ogern reicht die Palette - und diese Art von Humor zieht sich durch das gesamte Spiel.</p>
<p>Natürlich steckt hinter den meisten Nebenquests, wenn man alle Dialoge außer Acht lässt, auch nur das Übliche “Hole Gegenstand A und bringe ihn nach/zu B” bzw “Töte alle Monster im Umkreis”. Doch selten habe ich sie so gut verpackt gesehen wie bei <em>Two Worlds II</em>, und das war ungeheuer motivierend. Wenn ich das Ende von <em>Indiana Jones und der letzte Kreuzzug</em> fast 1:1 nachspielen darf (inklusive “Nenn’ mich nicht immer Junior”-Dialogen) oder mit dem Entwicklern über Fehlentwicklungen bei Kopierschutzsystemen lachen kann (SecuBOOK), dann verzeihe ich gerne, dass die Hauptquest zwischendurch oft in den Hintergrund gerät und ihr am Ende deutlich die Luft ausgeht.</p>
<p>Zu guter Letzt möchte ich noch aufzählen, was neben den von mir erwähnten Spielaspekten alles in der Welt von Antaloor möglich ist: Der Spieler kann reiten und Rennen auf seinem Pferd bestreiten, er kann sich an Würfelspielen versuchen und mit den unterschiedlichsten Musikinstrumenten Stücke nach dem Guitar-Hero-Prinzip spielen. Damit kann er an öffentlichen Plätzen sogar richtig viel Geld verdienen. In keinem RPG darf zudem eine Kampfarena der Kriegergilde fehlen, die einen neuen Champion sucht, der es mit allen Gegnern aufnimmt. Und die Diebesgilde hat sich neben Schleichen, Meucheln und Schlösserknacken auch auf Fallenlegen und Bombenbau spezialisiert und gibt dieses Wissen im Ausgleich für erfüllte Aufträge weiter. Desweiteren finden sich sogenannte Oculi, die aus den Augen von magisch veränderten Tieren gewonnen werden und es erlauben, wie Sonden ausgesandt zu werden und so um Ecken zu schauen und sogar Bomben ungefährdet aus großer Entfernung zu legen.</p>
<p><em>Two Worlds II</em> bietet also bereits im Solospielermodus eine fast unbegrenzte Flexibilität und eine unglaubliche Vielzahl an Möglichkeiten, die ich gar nicht alle aufzählen kann. Wer will, kann Stunden in Antaloor mit kurzweiligen Beschäftigungen verbringen, ohne sich um die eigentlichen Quests zu kümmern. Wer jedoch wie ich fast alle Quests erledigt, dafür aber kaum Nebenbeschäftigungen ausübt, der wird gut und gerne 40 Stunden lang sehr viel Spaß haben mit dem Spiel. Deshalb bleibt mir gar nichts anderes üblich, als <em>Two Worlds II</em> allen Fans von Solo-RPGs wärmstens ans Herz zu legen.</p>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/kingoli\.net\/blog\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>